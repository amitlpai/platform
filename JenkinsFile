pipeline {
    agent any 
	options {
        parallelsAlwaysFailFast()
    }
    stages {
	
		stage('Init') {
			parallel {
				stage('Send Email') {
					agent any
					steps {
						echo 'email sent'
					}
				}
				stage('Checkout code') {
					agent any
					steps {
						echo 'checkout codebase'
					}
				}
			}
		}
       
		stage('Build') {
			parallel {
				stage('Build codebase') {
					agent any
					steps {
						bat "ant -buildfile c:\\hybris\\hybris\\bin\\platform\\build.xml all"
					}
				}
				stage('Run SONAR') {
					agent any
					steps {
						bat "ant -buildfile c:\\hybris\\hybris\\bin\\platform\\build.xml sonarsingle -Dextension.names=twmwebservices"
					}
				}
				stage('Run JUNITS') {
					agent any
					steps {
						echo 'execute JUNITS'
					}
				}
			}
		}
		
    }
}